/*
CREATED		27.08.2007 A.
MODIFIED		29.08.2007 A.
PROJECT		
MODEL		
COMPANY		
AUTHOR		
VERSION		
DATABASE		ORACLE 10G 
*/


DROP TABLE "COMMENTS"
/
DROP TABLE "PHOTOS"
/
DROP TABLE "CATEGORIES"
/
DROP TABLE "USERS"
/


-- CREATE TYPES SECTION


-- CREATE TABLES SECTION


CREATE TABLE "USERS" (
	"USER_ID" INTEGER NOT NULL ,
	"USERNAME" NVARCHAR2(20) NOT NULL  UNIQUE ,
	"FIRST_NAME" NVARCHAR2(20) NOT NULL ,
	"LAST_NAME" NVARCHAR2(20) NOT NULL ,
	"PASSWORD" NVARCHAR2(20) NOT NULL ,
PRIMARY KEY ("USER_ID") 
) 
/

CREATE TABLE "CATEGORIES" (
	"CATEGORY_ID" INTEGER NOT NULL ,
	"CHILD_CATEGORY_ID" INTEGER NOT NULL ,
	"USER_ID" INTEGER NOT NULL ,
	"NAME" NVARCHAR2(20) NOT NULL  UNIQUE ,
	"PATH" NVARCHAR2(1000) NOT NULL  UNIQUE ,
PRIMARY KEY ("CATEGORY_ID") 
) 
/

CREATE TABLE "PHOTOS" (
	"PHOTO_ID" INTEGER NOT NULL ,
	"NAME" NVARCHAR2(20) NOT NULL  UNIQUE ,
	"PATH" NVARCHAR2(1000) NOT NULL  UNIQUE ,
	"CATEGORY_ID" INTEGER NOT NULL ,
PRIMARY KEY ("PHOTO_ID") 
) 
/

CREATE TABLE "COMMENTS" (
	"COMMENT_ID" INTEGER NOT NULL ,
	"TEXT" NVARCHAR2(200) NOT NULL ,
	"PHOTO_ID" INTEGER NOT NULL ,
	"USER_ID" INTEGER NOT NULL ,
PRIMARY KEY ("COMMENT_ID") 
) 
/


-- CREATE ALTERNATE KEYS SECTION


-- CREATE INDEXES SECTION


-- CREATE FOREIGN KEYS SECTION

ALTER TABLE "CATEGORIES" ADD  FOREIGN KEY ("USER_ID") REFERENCES "USERS" ("USER_ID") 
/

ALTER TABLE "COMMENTS" ADD  FOREIGN KEY ("USER_ID") REFERENCES "USERS" ("USER_ID") 
/

ALTER TABLE "PHOTOS" ADD  FOREIGN KEY ("CATEGORY_ID") REFERENCES "CATEGORIES" ("CATEGORY_ID") 
/

ALTER TABLE "CATEGORIES" ADD  FOREIGN KEY ("CHILD_CATEGORY_ID") REFERENCES "CATEGORIES" ("CATEGORY_ID") 
/

ALTER TABLE "COMMENTS" ADD  FOREIGN KEY ("PHOTO_ID") REFERENCES "PHOTOS" ("PHOTO_ID") 
/


-- CREATE OBJECT TABLES SECTION


-- CREATE XMLTYPE TABLES SECTION


-- CREATE PROCEDURES SECTION


-- CREATE FUNCTIONS SECTION


-- CREATE VIEWS SECTION


-- CREATE SEQUENCES SECTION


-- CREATE TRIGGERS FROM REFERENTIAL INTEGRITY SECTION


-- CREATE USER TRIGGERS SECTION


-- CREATE PACKAGES SECTION


-- CREATE SYNONYMS SECTION


-- CREATE ROLES SECTION


-- USERS PERMISSIONS TO ROLES SECTION


-- ROLES PERMISSIONS SECTION

/* ROLES PERMISSIONS */


-- USER PERMISSIONS SECTION

/* USERS PERMISSIONS */


-- CREATE TABLE COMMENTS SECTION


-- CREATE ATTRIBUTE COMMENTS SECTION


-- AFTER SECTION


